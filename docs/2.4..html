
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2.4. è‡ªç”±çš„ç¼–è¯‘å™¨ - èµ°å‡ºC++è°œäº‘</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">
  <script>
    window.MathJax = {'tex': {'inlineMath': [['$', '$'], ['\\(', '\\)']], 'displayMath': [['$$', '$$'], ['\\[', '\\]']], 'processEscapes': 'true', 'tags': 'ams'}, 'svg': {'fontCache': 'global'}};
  </script>
  
</head>

<body>
  <div class="container">
    
<div class="chapter-container">
  
<div class="navigation">
  <a href="2.3..html" class="prev-link">Â« ä¸Šä¸€ç« ï¼š2.3. å¾®è½¯çš„ C++</a>
  <a href="2.5..html" class="next-link">ä¸‹ä¸€ç« ï¼š2.5. å¤´æ–‡ä»¶ä¸ç¬¦åˆC++è§„èŒƒæ—¶ Â»</a>
</div>
<div class="back-to-toc" style="text-align:left"><a href="index.html">è¿”å›ç›®å½•</a></div>
  <section class="section"><h1 class="section-title">2.4. è‡ªç”±çš„ç¼–è¯‘å™¨</h1></section>
  <p>å½“ä»Šä¸‰å¤§ä¸»æµ C++ ç¼–è¯‘å™¨ä¸­çš„ä¸¤ä¸ª â€”â€” GCC å’Œ Clang â€”â€” æ˜¯ä»¥å¼€æºæ–¹å¼å¼€å‘å’Œç»´æŠ¤çš„ã€‚ä»ç†è®ºä¸Šè®²ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸ºè¿™äº›ç¼–è¯‘å™¨è´¡çŒ®ä»£ç ï¼Œæå‡ºæ–°ç‰¹æ€§ï¼Œç”šè‡³ä¿®å¤é—®é¢˜ã€‚ç„¶è€Œåœ¨å®è·µä¸­ï¼ŒçœŸæ­£æ¨åŠ¨å…¶å‘å±•çš„ï¼Œå¾€å¾€æ˜¯å°‘æ•°å…·å¤‡ä¸“ä¸šçŸ¥è¯†ã€æŒç»­æŠ•å…¥ä¸”é€šå¸¸å—åˆ°å¤§å‹ä¼ä¸šæ”¯æŒçš„æ ¸å¿ƒå¼€å‘è€…ã€‚</p>
<p>æˆªè‡³ 2024 å¹´ï¼ŒGCCã€Clang ä»¥åŠæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­æåˆ°çš„ Microsoft Visual C++ï¼ˆMSVCï¼‰ï¼Œæ˜¯å½“å‰æœ€ç¬¦åˆ C++ æ ‡å‡†çš„ç¼–è¯‘å™¨ï¼Œä¸‰è€…ä¹‹é—´éš¾ä»¥ç®€å•åœ°åˆ†å‡ºé«˜ä¸‹ã€‚å°½ç®¡å®ƒä»¬éƒ½è‡´åŠ›äºå®ç°æ ‡å‡†è§„èŒƒï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒä»¬æ²¡æœ‰å„è‡ªç‹¬ç‰¹çš„æ‰©å±•åŠŸèƒ½ã€‚äº‹å®ä¸Šï¼Œè®¸å¤šå¼€å‘è€…è®¤ä¸ºï¼Œåˆç†ä½¿ç”¨è¿™äº›æ‰©å±•åè€Œèƒ½æå‡ä»£ç çš„è¡¨ç°åŠ›ä¸æ•ˆç‡ã€‚</p>
<p>ä»¥ GCC çš„â€œè®¡ç®— gotoâ€åŠŸèƒ½ä¸ºä¾‹ï¼ˆClang åŒæ ·æ”¯æŒè¿™ä¸€ç‰¹æ€§ï¼‰ï¼Œå®ƒä¾¿æ˜¯ä¸€ä¸ªæå…·äº‰è®®ä½†åˆé¢‡å…·å®ç”¨ä»·å€¼çš„éæ ‡å‡†æ‰©å±•ã€‚æˆ‘ä»¬æ›¾åœ¨å­¦æ ¡é‡Œå­¦åˆ°ï¼šgoto æ˜¯é‚ªæ¶çš„ï¼Œåº”è¯¥æ°¸è¿œé¿å…ä½¿ç”¨ã€‚å¦‚æœä½ åœ¨å­¦æ ¡æ²¡å¬è¿‡è¿™å¥è¯ï¼Œä¹Ÿè¯·ä¸è¦ä»æœ¬ä¹¦ä¸­å­¦åˆ°å®ƒ â€”â€” å› ä¸ºè¿™æ¬¡ï¼Œâ€œå®ƒå…¶å®å¹¶ä¸å®Œå…¨æ­£ç¡®â€ã€‚</p>
<p>ä¸å…¶è¯´ goto æ˜¯â€œé‚ªæ¶â€çš„ï¼Œä¸å¦‚è¯´å®ƒæ˜¯ä¸€ç§å¼ºå¤§è€Œå®¹æ˜“æ»¥ç”¨çš„è¯­è¨€ç‰¹æ€§ã€‚é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬è°ˆåˆ°â€œè®¡ç®— gotoâ€æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥è¯´å®ƒæ˜¯â€œç»è¿‡è®¡ç®—çš„é‚ªæ¶â€å‘¢ï¼Ÿä¸‹é¢è¿™æ®µä»£ç ç©¶ç«Ÿå±äºâ€œçº¯ç²¹çš„é‚ªæ¶â€ï¼Œè¿˜æ˜¯â€œç»è¿‡è®¡ç®—çš„é‚ªæ¶â€ï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<p><pre><code class="language-cpp">int main() {
  std::vector&lt;void*&gt; labels = { &amp;&amp;start, &amp;&amp;state1, &amp;&amp;state2, &amp;&amp;end };
  int state = 0;
  goto *labels[state];
  start:
    std::cout &lt;&lt; &quot;In start state&quot; &lt;&lt; std::endl;
    state = 1;
    goto *labels[state];
  state1:
    std::cout &lt;&lt; &quot;In state 1&quot; &lt;&lt; std::endl;
    state = 2;
    goto *labels[state];
  state2:
    std::cout &lt;&lt; &quot;In state 2&quot; &lt;&lt; std::endl;
    state = 3;
    goto *labels[state];
  end:
    std::cout &lt;&lt; &quot;In end state&quot; &lt;&lt; std::endl;
    return 0;
}</code></pre></p>
<p>ç¬¬ä¸€è¡Œä»£ç å¹¶æ²¡æœ‰é—®é¢˜ã€‚çœŸæ­£çš„æŒ‘æˆ˜ä»é‚£ä¹‹åæ‰å¼€å§‹ã€‚è¿™ä¸ªéå¸¸å®ç”¨ä½†éæ ‡å‡†çš„åŠŸèƒ½ â€”â€” è®¡ç®— goto â€”â€” å…è®¸é€šè¿‡æŒ‡é’ˆè·³è½¬åˆ°ç‰¹å®šçš„æ ‡ç­¾ä½ç½®ã€‚è¿™äº›æ ‡ç­¾åœ°å€å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©ï¼Œå¹¶ç”¨äºå®ç°é«˜æ•ˆçš„è§£é‡Šå™¨ã€è™šæ‹Ÿæœºæˆ–çŠ¶æ€æœºç­‰ç»“æ„ã€‚æ ‡ç­¾æŒ‡é’ˆé€šå¸¸é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„åˆå§‹åŒ–ï¼Œè€Œè¿™äº›æŒ‡é’ˆåˆæŒ‡å‘å„è‡ªæ ‡ç­¾çš„å®é™…åœ°å€ã€‚</p>
<p>ç”±äºå®ƒæ“ä½œçš„æ˜¯æŒ‡é’ˆï¼Œå› æ­¤æˆ‘ä»¬ç”šè‡³å¯ä»¥ä½¿ç”¨â€œä»¤äººæœ›è€Œç”Ÿç•â€çš„æŒ‡é’ˆè¿ç®—æ¥å¯¹åœ°å€è¿›è¡Œä¸€äº›åŠ¨æ€è°ƒæ•´ã€‚è¿™åœ¨æŸäº›åº•å±‚æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­æå…·å¸å¼•åŠ›ã€‚</p>
<p>ç„¶è€Œï¼Œä¸ä»»ä½•å¼ºå¤§çš„å·¥å…·ä¸€æ ·ï¼Œå®ƒä¹Ÿå¯èƒ½å¸¦æ¥é£é™©ã€‚ä¸æ ‡å‡† goto ä¸åŒçš„æ˜¯ï¼Œè®¡ç®— goto å¹¶ä¸ä¼šè€ƒè™‘å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ã€‚å¦‚æœè·³è¿‡äº†æŸä¸ªå…·æœ‰è‡ªåŠ¨å­˜å‚¨æœŸçš„å¯¹è±¡çš„æ„é€ ç‚¹ï¼Œæˆ–è€…è·³å‡ºäº†å®ƒçš„ä½œç”¨åŸŸï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„ææ„å‡½æ•°å°†ä¸ä¼šè¢«è°ƒç”¨ã€‚è¿™å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼ã€æœªå®šä¹‰è¡Œä¸ºï¼Œç”šè‡³æ˜¯éš¾ä»¥è¿½è¸ªçš„ bugã€‚</p>
<p>æ‰€ä»¥ï¼Œè¯·æŠŠå®ƒå½“ä½œä¸€ç§â€œå—æ§çš„å±é™©â€ï¼šåªæœ‰åœ¨ä½ å®Œå…¨ç†è§£åæœçš„æƒ…å†µä¸‹æ‰åº”ä½¿ç”¨å®ƒã€‚</p>
<p>å¦ä¸€ä¸ªæ¥è‡ª GCC çš„æœ‰è¶£æ‰©å±•ï¼ˆåŒæ ·ä¹Ÿè¢« Clang æ”¯æŒï¼ŒçœŸæ˜¯ä»¤äººæƒŠå–œï¼‰ï¼Œä¹Ÿå±•ç¤ºäº†ä¸€ç§å¯¹æ ‡å‡† C++ è¯­æ³•çš„å®ç”¨åç¦»ã€‚å®ƒä½¿å¾—ä»¥ä¸‹è¿™æ®µä»£ç èƒ½å¤Ÿåœ¨ä¸Šè¿°ä¸¤ä¸ªç¼–è¯‘å™¨ä¸Šé¡ºåˆ©ç¼–è¯‘ï¼š</p>
<p><pre><code class="language-cpp">int y = ({ int x = 10; x + 5; });</code></pre></p>
<p>å¾ˆæ•´æ´ï¼Œä¸æ˜¯å—ï¼Ÿè¿™ä¸ªç‰¹æ€§è¢«ç§°ä¸º â€œè¡¨è¾¾å¼ä¸­çš„è¯­å¥å’Œå£°æ˜â€ï¼Œå®ƒå¸¦æ¥äº†ä½ èƒ½æƒ³è±¡åˆ°çš„å„ç§å¥½å¤„ï¼šå†…éƒ¨å£°æ˜çš„å¯¹è±¡å¯ä»¥è¢«å¾ˆå¥½åœ°å°è£…ï¼Œå¦‚æœä½¿ç”¨å¾—å½“ï¼Œç”šè‡³å¯ä»¥è®©å®çš„ä½¿ç”¨å˜å¾—æ›´åŠ å®‰å…¨ã€‚</p>
<p>å¯æƒœçš„æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯æ ‡å‡† C++ çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>Clang ä½œä¸ºç¼–è¯‘å™¨ä¸–ç•Œä¸­çš„â€œæ–°ç§€â€<span class="footnote">å¥½å§ï¼Œå¦‚æœæˆ‘ä»¬èƒ½ç§°ä¸€ä¸ªå·²æœ‰ 15 å¹´å†å²çš„ç¼–è¯‘å™¨ä¸ºâ€œæ–°â€çš„è¯ â€”â€” ä¸ GCC ç›¸æ¯”ï¼Œå®ƒçš„è¯ç”Ÿæ—¶é—´ç¡®å®è¦æ™šå¾ˆå¤šï¼Œæ¯•ç«Ÿ GCC æ—©åœ¨ 1987 å¹´å°±å·²é—®ä¸–ã€‚ä½†æ— è®ºå¦‚ä½•ï¼ŒClang ä»ç„¶æ˜¯ä¸€ä¸ªç›¸å¯¹å¹´è½»å´æŠ€æœ¯ç²¾æ¹›çš„å‚ä¸è€…</span>ï¼Œåœ¨æ”¯æŒè¿™ç±»åˆ›æ–°ç‰¹æ€§æ–¹é¢èµ°å¾—æ›´è¿œã€‚</p>
<p>ä¸‹é¢è¿™æ®µä»£ç åªèƒ½åœ¨ Clang ä¸‹æˆåŠŸç¼–è¯‘ï¼Œå¹¶ä¸”å¾—ç›Šäºå…¶ç‰¹æœ‰çš„ç¼–è¯‘å™¨é€‰é¡¹å’Œæ–°å…´è¯­è¨€ç‰¹æ€§çš„æ”¯æŒï¼š</p>
<p><pre><code class="language-cpp">#include &lt;iostream&gt;
int main() {
  int (^square)(int) = ^(int num) { return num * num; };
  int y = square(12);
  std::cout &lt;&lt; y &lt;&lt; std::endl;
}</code></pre></p>
<p>è¿™ä¸€ç‰¹æ€§è¢«ç§°ä¸º Clang ä¸­çš„ Blocksã€‚è¦æ­£ç¡®ä½¿ç”¨å®ƒï¼Œä½ éœ€è¦å®‰è£… BlocksRuntime<span class="footnote"><a href="https://github.com/mackyle/blocksruntime" target="_blank" rel="noopener noreferrer">https://github.com/mackyle/blocksruntime</a></span> åº“ï¼Œå¹¶åœ¨ç¼–è¯‘æ—¶ä¸º Clang æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„æ ‡å¿—ï¼š-fblocksã€‚å®Œæˆè¿™äº›é…ç½®ä¹‹åï¼Œä½ å°±å¯ä»¥æˆåŠŸç¼–è¯‘å‰é¢çš„ä»£ç äº†ã€‚</p>
<p>ä»è¡Œä¸ºä¸Šçœ‹ï¼ŒBlocks ä¸ C++11 å¼•å…¥çš„ lambda è¡¨è¾¾å¼éå¸¸ç›¸ä¼¼ã€‚è€ƒè™‘åˆ° Blocks æ˜¯åœ¨ 2008 å¹´ç”± Clang é¦–å…ˆæå‡ºå¹¶å®ç°çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¯´å®ƒæ˜¯æ ‡å‡† C++ lambda çš„â€œå‰èº«â€æˆ–â€œçµæ„Ÿæ¥æºâ€ã€‚</p>
<p>å¦‚æœä½ å¯¹å®ƒä»¬ä¹‹é—´çš„å…³ç³»æ„Ÿå…´è¶£ï¼Œä¸‹é¢æ˜¯ç”¨æ ‡å‡† C++ ç¼–å†™çš„ç­‰æ•ˆ lambda ç¤ºä¾‹ï¼š</p>
<p><pre><code class="language-cpp">auto square = [](int num) -&gt;int { return num * num; };</code></pre></p>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ åˆšæ‰çœ‹åˆ°ç±»ä¼¼ Blocks çš„è¯­æ³•æ—¶æ„Ÿåˆ°æœ‰äº›å›°æƒ‘ï¼Œé‚£å¯èƒ½åªæ˜¯ä½ å¯¹ C++ æ–°ç‰¹æ€§çš„è®°å¿†éœ€è¦ä¸€æ¬¡å°å°çš„â€œåˆ·æ–°â€ã€‚</p>
<p>é¡ºä¾¿æä¸€å¥ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œä¸‹é¢è¿™ç§å†™æ³•éƒ½ä¸æ˜¯æ ‡å‡† C++ï¼š</p>
<p><pre><code class="language-cpp">int array[n] = {0};</code></pre></p>
<p>è¿™æ˜¯ä¸€ä¸ªå¯å˜é•¿åº¦æ•°ç»„ï¼Œæ˜¯ C è¯­è¨€ä¸­çš„ä¸€é¡¹åŠŸèƒ½ã€‚ç”±äºå­˜åœ¨è¯¸å¤šå®‰å…¨å’Œå¯ç§»æ¤æ€§é—®é¢˜ï¼ŒC++ æ ‡å‡†å¹¶æœªå°†å…¶çº³å…¥å…¶ä¸­ã€‚</p>
<p>å°½ç®¡å¦‚æ­¤ï¼ŒGCC ç¼–è¯‘å™¨ä»ç„¶æ¥å—ä¸Šè¿°å†™æ³•ï¼Œè€Œ Clang åˆ™ä¼šæŠ¥é”™ï¼š</p>
<p><pre><code class="language-shell">error: variable-sized object may not be initialized
   5 | int array[n] = {0};</code></pre></p>
<p>æ ¹æ®é”™è¯¯æç¤ºï¼Œä¿®å¤æ–¹æ³•å…¶å®å¾ˆç®€å•ã€‚å¯ä»¥å°†åŸå§‹ä»£ç æ”¹å†™ä¸ºæ›´ç¬¦åˆç°ä»£ C++ é£æ ¼çš„å½¢å¼ï¼š</p>
<p><pre><code class="language-cpp">auto generate(int n) -&gt; std::vector&lt;int&gt;{
  int array[n];
  for(int i=0; i&lt;n; i++) array[i] = i;
  return std::vector&lt;int&gt;{array, array + n};
}</code></pre></p>
<p>è¿™æ ·ä¿®æ”¹åï¼Œå³ä½¿æ˜¯ Clangï¼ˆä»¥åŠå…¶ä»–ä¸»æµç¼–è¯‘å™¨ï¼Œå¦‚ ICCï¼‰ä¹Ÿèƒ½é¡ºåˆ©é€šè¿‡ç¼–è¯‘ï¼Œæ— è®ºè¿™æ®µä»£ç æ˜¯å¦å®Œå…¨ç¬¦åˆæ ‡å‡†â€¦â€¦æˆ–è€…è¯´ï¼Œæ›´å‡†ç¡®åœ°è¯´ â€”â€” ä½“ç°äº†æ ‡å‡†ä¹‹å¤–çš„ç°å®ä¸–ç•Œã€‚</p>
<p><h4 class="filename">2.4.1 æ•¬å±æ€§</h4></p>
<p>ä»¤äººæƒŠè®¶çš„æ˜¯ï¼ŒGCCã€Clang å’Œ Microsoft Visual C++ åœ¨ C++ è¯­è¨€çš„ä¸€ä¸ªéå¸¸å…·ä½“çš„æ‰©å±•ä¸Šè¾¾æˆäº†å…±è¯†ï¼šæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿå°†å…ƒæ•°æ®é™„åŠ åˆ°æŸäº›è¯­è¨€ç»“æ„ï¼ˆå¦‚ç±»å‹ã€å‡½æ•°ã€å˜é‡ç­‰ï¼‰ä¹‹ä¸Šã€‚è¿™äº›å…ƒæ•°æ®éšåå¯ä»¥è¢«ç¼–è¯‘å™¨æˆ–å…¶ä»–å·¥å…·ä½¿ç”¨ï¼Œç”¨äºç”Ÿæˆä¼˜åŒ–ä»£ç ã€æ‰§è¡Œé™æ€æ£€æŸ¥æˆ–æä¾›é¢å¤–åŠŸèƒ½ã€‚</p>
<p>åœ¨ç°ä»£ C++ï¼ˆå³ C++11ï¼‰å¼•å…¥æ ‡å‡†åŒ–çš„åŒæ–¹æ‹¬å·è¯­æ³• [[attribute]] æ¥æŒ‡å®šå±æ€§ä¹‹å‰ï¼Œå„ä¸»æµç¼–è¯‘å™¨éƒ½å„è‡ªå®ç°äº†è‡ªå·±çš„æ–¹å¼æ¥å£°æ˜è¿™äº›å…³é”®å±æ€§ï¼š</p>
<p><ul>
    <li>GCC å’Œ Clang ä½¿ç”¨ __attribute__((attribute-name))</li>  <li>Microsoft Visual C++ ä½¿ç”¨ __declspec(attribute-name)
</ul></li></p>
<p>éšç€ C++11 çš„å‘å¸ƒï¼Œæ ‡å‡†åŒ–å§”å‘˜ä¼šè®¤è¯†åˆ°è¿™äº›å±æ€§çš„é‡è¦æ€§å’Œå®ç”¨æ€§ï¼Œå¹¶å°†å…¶ä¸­æœ€å¸¸ç”¨çš„ä¸€äº›æå‡ä¸ºè¯­è¨€æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚ [[noreturn]]ã€‚åç»­çš„æ ‡å‡†æ›´æ–°ä¹Ÿä¸æ–­å¼•å…¥æ–°çš„å±æ€§ï¼Œå¦‚ [[fallthrough]]ã€[[nodiscard]] ç­‰ã€‚</p>
<p>ç„¶è€Œï¼Œè®¸å¤šå…¶ä»–æœ‰ç”¨çš„å±æ€§ä»ç„¶å±€é™äºå®ƒä»¬æœ€åˆè¯ç”Ÿçš„ç¼–è¯‘å™¨ã€‚ä¸‹é¢çš„ä»£ç æ®µå±•ç¤ºäº†ä¸€äº›å…¸å‹çš„éæ ‡å‡†ä½†å¹¿æ³›ä½¿ç”¨çš„å±æ€§ç¤ºä¾‹ï¼š</p>
<p><pre><code class="language-cpp">void old_function() __attribute__((deprecated));
void fatal_error() __attribute__((noreturn));
int pure_function(int x) __attribute__((pure));
int x __attribute__((aligned(16)));
void old_function() {
  std::cout &lt;&lt; &quot;This function is deprecated.&quot;;
}
void fatal_error() {
  std::cerr &lt;&lt; &quot;This function does not return.&quot;;
  exit(1);
}
int pure_function(int x) {
  return x * x;
}</code></pre></p>
<p>ä¸Šè¿°ä»£ç ä¸­å±•ç¤ºäº† GCC å’Œ Clang æ”¯æŒçš„ä¸€äº›å¸¸è§å±æ€§åŠå…¶ç”¨é€”:</p>
<p><ul>
    <li>__attribute__((deprecated))  æ ‡è®°old_functionä¸ºå·²å¼ƒç”¨ï¼Œæé†’å¼€å‘è€…é¿å…ä½¿ç”¨ã€‚</li>  <li>__attribute__((noreturn)) å‘ŠçŸ¥ç¼–è¯‘å™¨ fatal_error å‡½æ•°ä¸ä¼šè¿”å›ï¼Œæœ‰åŠ©äºä¼˜åŒ–å’Œè­¦å‘ŠæŠ‘åˆ¶ã€‚</li>  <li>__attribute__((pure))  è¡¨ç¤º pure_function æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œé™¤äº†è¿”å›å€¼å¤–æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¯ç”¨äºè¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</li>  <li>__attribute__((aligned(16))) å°†å˜é‡ x å¯¹é½åˆ° 16 å­—èŠ‚è¾¹ç•Œï¼Œå¸¸ç”¨äºæ€§èƒ½æ•æ„Ÿæˆ–ç¡¬ä»¶äº¤äº’åœºæ™¯ã€‚
</ul></li></p>
<p>è¿™äº›ç¼–è¯‘å™¨ <span class="footnote"><a href="https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html" target="_blank" rel="noopener noreferrer">https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html</a></span> æä¾›çš„å±æ€§åˆ—è¡¨éå¸¸åºå¤§ <span class="footnote"><a href="https://clang.llvm.org/docs/AttributeReference.html" target="_blank" rel="noopener noreferrer">https://clang.llvm.org/docs/AttributeReference.html</a></span>ã€‚å¦‚æœæ­£åœ¨æŸä¸ªç‰¹å®šå¹³å°ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¹¶ä¸”ä¸»è¦å…³æ³¨ç‚¹ä¸æ˜¯ä»£ç çš„å¯ç§»æ¤æ€§ã€å¹³å°ç‹¬ç«‹æ€§æˆ–ä¸¥æ ¼çš„æ ‡å‡†åˆè§„æ€§ï¼Œå¼ºçƒˆå»ºè®®å¯¹ç›¸å…³æ–‡æ¡£è¿›è¡ŒæŸ¥é˜…ã€‚</p>
<p>é€šè¿‡æ­£ç¡®ä½¿ç”¨ç¼–è¯‘å™¨æä¾›çš„æ‰©å±•å±æ€§ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨å…¶å¼ºå¤§çš„åŠŸèƒ½ï¼Œåœ¨æ€§èƒ½ã€å®‰å…¨æ€§å’Œä»£ç è¡¨è¾¾åŠ›æ–¹é¢è·å¾—æ˜¾è‘—æå‡ã€‚</p>
  <div class="back-to-toc" style="text-align:left"><a href="index.html">è¿”å›ç›®å½•</a></div>
<div class="navigation">
  <a href="2.3..html" class="prev-link">Â« ä¸Šä¸€ç« ï¼š2.3. å¾®è½¯çš„ C++</a>
  <a href="2.5..html" class="next-link">ä¸‹ä¸€ç« ï¼š2.5. å¤´æ–‡ä»¶ä¸ç¬¦åˆC++è§„èŒƒæ—¶ Â»</a>
</div>

</div>

  </div>
  <!-- å…ˆåŠ è½½æ ¸å¿ƒåº“ -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  
  <!-- åŠ è½½MathJax -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" id="MathJax-script" async></script>
  
  <!-- ä¸»é¢˜åˆ‡æ¢è„šæœ¬ -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // åˆ›å»ºä¸»é¢˜åˆ‡æ¢æŒ‰é’®
    const themeToggle = document.createElement('button');
    themeToggle.className = 'theme-toggle';
    themeToggle.setAttribute('aria-label', 'åˆ‡æ¢ä¸»é¢˜');
    themeToggle.innerHTML = 'ğŸŒ“';
    document.body.appendChild(themeToggle);
    
    // æ·»åŠ æ·±è‰²å’Œæµ…è‰²ä¸»é¢˜çš„æ ·å¼
    const darkThemeStyle = document.createElement('style');
    const lightThemeStyle = document.createElement('style');
    
    darkThemeStyle.textContent = `
      body.dark-theme {
        --background-color: #1a1a1a;
        --text-color: #e6e6e6;
        --code-bg-color: #2d2d2d;
        --link-color: #58a6ff;
        --highlight-color: #58a6ff;
        --border-color: #333;
        --table-border-color: #444;
        --table-header-bg: #2d2d2d;
        --blockquote-color: #aaa;
        --blockquote-border: #444;
        --part-header-bg: #222;
        --footer-text-color: #aaa;
        --filename-bg: #2d2d2d;
        --nav-bg: #2d2d2d;
        --nav-hover-bg: #444;
        --toc-bg: #222;
        --highlight-section-bg: #2d2d2d;
        --highlight-section-border: #58a6ff;
      }
    `;
    
    lightThemeStyle.textContent = `
      body.light-theme {
        --background-color: #ffffff;
        --text-color: #333333;
        --code-bg-color: #f5f5f5;
        --link-color: #0366d6;
        --highlight-color: #0366d6;
        --border-color: #eee;
        --table-border-color: #ddd;
        --table-header-bg: #f2f2f2;
        --blockquote-color: #666;
        --blockquote-border: #ddd;
        --part-header-bg: #f8f8f8;
        --footer-text-color: #666;
        --filename-bg: #f5f5f5;
        --nav-bg: #f5f5f5;
        --nav-hover-bg: #e6e6e6;
        --toc-bg: #f8f8f8;
        --highlight-section-bg: #f8f8f8;
        --highlight-section-border: #0366d6;
      }
    `;
    
    document.head.appendChild(darkThemeStyle);
    document.head.appendChild(lightThemeStyle);
    
    // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„è®¾ç½®
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    const currentTheme = localStorage.getItem('theme');
    
    if (currentTheme === 'dark') {
      document.body.classList.add('dark-theme');
    } else if (currentTheme === 'light') {
      document.body.classList.add('light-theme');
    } else {
      // å¦‚æœæ²¡æœ‰ä¿å­˜çš„åå¥½ï¼Œè·Ÿéšç³»ç»Ÿ
      if (prefersDarkScheme.matches) {
        document.body.classList.add('dark-theme');
      } else {
        document.body.classList.add('light-theme');
      }
    }
    
    // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
    themeToggle.addEventListener('click', function() {
      console.log('Theme toggle clicked');
      if (document.body.classList.contains('dark-theme')) {
        document.body.classList.remove('dark-theme');
        document.body.classList.add('light-theme');
        localStorage.setItem('theme', 'light');
      } else {
        document.body.classList.remove('light-theme');
        document.body.classList.add('dark-theme');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // ç¡®ä¿ä»£ç å—æœ‰æ­£ç¡®çš„ç±»å
    document.querySelectorAll('pre code').forEach(function(block) {
      if (!block.className && block.parentNode.innerHTML.includes('cpp')) {
        block.className = 'language-cpp';
      } else if (!block.className && block.parentNode.innerHTML.includes('rust')) {
        block.className = 'language-rust';
      } else if (!block.className) {
        block.className = 'language-plaintext';
      }
    });
    
    // å»¶è¿ŸåŠ è½½Prismé«˜äº®
    setTimeout(function() {
      if (window.Prism) {
        window.Prism.highlightAll();
      }
    }, 500);
  });
  </script>
</body>
</html>