
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>5.5. å»åºä»ç®€ - èµ°å‡ºC++è°œäº‘</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">
  <script>
    window.MathJax = {'tex': {'inlineMath': [['$', '$'], ['\\(', '\\)']], 'displayMath': [['$$', '$$'], ['\\[', '\\]']], 'processEscapes': 'true', 'tags': 'ams'}, 'svg': {'fontCache': 'global'}};
  </script>
  
</head>

<body>
  <div class="container">
    
<div class="chapter-container">
  
<div class="navigation">
  <a href="5.4..html" class="prev-link">Â« ä¸Šä¸€ç« ï¼š5.4. é»‘æš—æ³•åˆ™</a>
  <a href="5.6..html" class="next-link">ä¸‹ä¸€ç« ï¼š5.6. æ€»ç»“ Â»</a>
</div>
<div class="back-to-toc" style="text-align:left"><a href="index.html">è¿”å›ç›®å½•</a></div>
  <section class="section"><h1 class="section-title">5.5. å»åºä»ç®€</h1></section>
  <p>åœ¨ç»“æŸæœ¬ç« å‰ï¼Œè¿˜æœ‰ä¸¤ä¸ªé‡è¦ç»†èŠ‚éœ€è¦è¯´æ˜ã€‚</p>
<p>ç¬¬ä¸€ï¼ŒC++ ä¸­å‡½æ•°å‚æ•°çš„æ±‚å€¼é¡ºåºæ˜¯æœªæŒ‡å®šçš„ï¼ˆunspecifiedï¼‰ï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªå…·æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªç”±é€‰æ‹©ä»¥ä½•ç§é¡ºåºå¯¹è¿™äº›å‚æ•°è¿›è¡Œæ±‚å€¼ã€‚è¿™ç§ä¸ç¡®å®šæ€§åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä¼šé€ æˆå½±å“ï¼Œä½†å¦‚æœå‚æ•°è¡¨è¾¾å¼ä¸­åŒ…å«æœ‰å‰¯ä½œç”¨ï¼ˆä¾‹å¦‚ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼‰ï¼Œå°±å¯èƒ½å¯¼è‡´è¡Œä¸ºä¸ä¸€è‡´ï¼Œç”šè‡³å¼•å‘éš¾ä»¥å¯Ÿè§‰çš„é”™è¯¯ã€‚</p>
<p>è¯·çœ‹ä»¥ä¸‹ç¤ºä¾‹ç¨‹åºï¼š</p>
<p><pre><code class="language-cpp">#include &lt;iostream&gt;

int f (int a, int b, int c) {
  std::cout &lt;&lt; &quot;a=&quot;&lt;&lt;a&lt;&lt;&quot; b=&quot;&lt;&lt;b&lt;&lt;&quot; c=&quot;&lt;&lt;c&lt;&lt;std::endl;
  return a+b+c;
}

int main() {
  int i = 1;
  std::cout&lt;&lt;&quot;f=&quot;&lt;&lt;f(i++, i++, i++)&lt;&lt;std::endl&lt;&lt;&quot;i=&quot;&lt;&lt;i&lt;&lt;std::endl;
}</code></pre></p>
<p>æ— è®ºä½ è®¤ä¸ºè¿™ä¸ªç¨‹åºçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Œä½ çš„ç­”æ¡ˆéƒ½å¾ˆå¯èƒ½æ˜¯é”™çš„ã€‚</p>
<p>åŸå› æ­£å¦‚å‰æ–‡æ‰€è¿°ï¼šå‡½æ•°å‚æ•°çš„æ±‚å€¼é¡ºåºæ˜¯æœªæŒ‡å®šçš„ï¼ˆunspecifiedï¼‰ã€‚ä½ æˆ–è®¸ä¼šé—®ï¼šä¸ºä»€ä¹ˆC++è¦è¿™æ ·è®¾è®¡ï¼Ÿè¿™èƒŒåç¡®å®æœ‰ç€å¤æ‚çš„å†å²åŸå› ã€‚ä¸è¿‡åœ¨æ·±å…¥æ¢è®¨è¿™äº›ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸åŒç¼–è¯‘å™¨åœ¨å¦‚ gcc.godbolt.org ç­‰å¹³å°ä¸Šç»™å‡ºçš„å®é™…è¾“å‡ºç»“æœï¼š</p>
<p><table border="1">
  <thead>
    <tr>
      <th><strong>ç¼–è¯‘å™¨</strong></th>
      <th><strong>è¾“å‡º</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Microsoft Visual C++ (after 2005)</td>
      <td>a=1 b=1 c=1 <br> <br> f=3 <br> <br> i=4</td>
    </tr>
    <tr>
      <td>Microsoft VS.NET 2003</td>
      <td>a=3 b=2 c=1 <br> <br> f=6 <br> <br> i=4</td>
    </tr>
    <tr>
      <td>Microsoft Visual C++ 6</td>
      <td>a=1 b=1 c=1 <br> <br> f=3 <br> <br> i=4</td>
    </tr>
    <tr>
      <td>ICC and Clang agree on thisâ€¦</td>
      <td>f=a=1 b=2 c=3 <br> <br> 6 <br> <br> i=4</td>
    </tr>
    <tr>
      <td>GCC, after 6.5</td>
      <td>f=a=3 b=2 c=1 <br> <br> 6 <br> <br> i=4</td>
    </tr>
    <tr>
      <td>GCC, before 6.5</td>
      <td>a=3 b=2 c=1 f=<br> <br> 6 <br> <br> i=4</td>
    </tr>
    <tr>
      <td>Turbo C Lite and Borland C++55</td>
      <td>a=3 b=2 c=1 <br> <br> f=6 <br> <br> i=1</td>
    </tr>
  </tbody>
</table>
</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬é¢ä¸´ç€å¤šç§å¯èƒ½çš„é€‰æ‹© â€”â€” æœ‰äº›è¾ƒä¸ºç›´è§‚ï¼Œæœ‰äº›åˆ™ç›¸å½“ç‰¹æ®Šã€‚æ‰€æœ‰è¿™äº›çœ‹ä¼¼å¥‡æ€ªçš„ç»“æœéƒ½å®£ç§°è‡ªå·±æ˜¯â€œæ­£ç»Ÿç­”æ¡ˆâ€ï¼Œå³ä¾¿åŒä¸€å‚å•†çš„ä¸åŒç¼–è¯‘å™¨ç‰ˆæœ¬ä¹Ÿå¯èƒ½ç»™å‡ºä¸åŒçš„ç»“æœã€‚è€Œå®ƒä»¬çš„ç¡®éƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå…è®¸ç¼–è¯‘å™¨è‡ªç”±é€‰æ‹©æ±‚å€¼é¡ºåºï¼Œæ˜¯ä¸ºäº†ä½¿å…¶èƒ½å¤Ÿè¿›è¡Œæˆ‘ä»¬å¼€å‘è€…å¯èƒ½æ³¨æ„ä¸åˆ°çš„æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<p><ul>
    <li>ç¼–è¯‘å™¨å¯ä»¥é‡æ’æŒ‡ä»¤ä»¥åˆ©ç”¨ CPU æµæ°´çº¿</li>  <li>æœ€å°åŒ–å¯„å­˜å™¨ä½¿ç”¨</li>  <li>æå‡ç¼“å­˜æ•ˆç‡ï¼Œä¸¥æ ¼æŒ‡å®šçš„æ±‚å€¼é¡ºåºä¼šé™åˆ¶è¿™äº›ä¼˜åŒ–æœºä¼š
</ul></li></p>
<p>ä¸åŒçš„ç¡¬ä»¶æ¶æ„å¯èƒ½éœ€è¦ä¸åŒçš„æœ€ä¼˜æ±‚å€¼ç­–ç•¥ã€‚ä¸æŒ‡å®šæ±‚å€¼é¡ºåºï¼Œä½¿ C++ ä»£ç æ›´å®¹æ˜“é€‚é…å¤šç§æ¶æ„ï¼Œè€Œæ— éœ€ä¿®æ”¹ä»£ç æœ¬èº«ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸æŒ‡å®šæ±‚å€¼é¡ºåºä¹Ÿä¿æŒäº† C++ è¯­è¨€è§„èŒƒçš„ç®€æ´æ€§ã€‚å¦‚æœä¸ºæ‰€æœ‰è¡¨è¾¾å¼æŒ‡å®šä¸¥æ ¼çš„æ±‚å€¼é¡ºåºï¼Œå°†å¤§å¤§å¢åŠ è¯­è¨€å®šä¹‰çš„å¤æ‚æ€§ï¼Œå¹¶åŠ é‡ç¼–è¯‘å™¨å¼€å‘è€…çš„è´Ÿæ‹…ã€‚è€ƒè™‘åˆ°ç°è¡Œæ ‡å‡†å·²æ¥è¿‘ 2000 é¡µï¼Œæˆ–è®¸æ²¡æœ‰å¿…è¦å†å¢åŠ æ•°ç™¾é¡µæ¥è¯¦ç»†è§„å®šå‚æ•°æ±‚å€¼çš„å¤æ‚æ€§ã€‚</p>
<p>ä¸è¿‡ï¼Œæœ¬èŠ‚å¼€å¤´æ‰¿è¯ºè¦æåˆ°çš„ç¬¬äºŒä¸ªé‡ç‚¹æ˜¯ï¼šè™½ç„¶è¿ç®—ç¬¦ä¼˜å…ˆçº§å’Œç»“åˆæ€§å†³å®šäº†è¡¨è¾¾å¼çš„åˆ†ç»„å’Œè§£ææ–¹å¼ï¼Œä½†å®ƒä»¬å¹¶ä¸æ§åˆ¶æ±‚å€¼é¡ºåºã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿ä½ çŸ¥é“è¡¨è¾¾å¼å°†å¦‚ä½•åˆ†ç»„ï¼Œå…¶å„éƒ¨åˆ†çš„å®é™…æ±‚å€¼é¡ºåºä»å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>è¯·çœ‹ä»¥ä¸‹ç®€çŸ­ç¤ºä¾‹ç¨‹åºï¼š</p>
<p><pre><code class="language-cpp">#include &lt;iostream&gt;

int main() {
  int i = 4;
  i = ++i + i++;
  std::cout &lt;&lt; i &lt;&lt; std::endl;
  return 0;
}</code></pre></p>
<p>è¿™æ®µä»£ç æå…¶ç®€çŸ­ï¼Œä½†å´åŒ…å«äº†ä¸€äº›æå…·äº‰è®®çš„è¡¨è¾¾å¼ï¼Œå°¤å…¶æ˜¯ ++i + i++ã€‚è¿™ä¸ªè¡¨è¾¾å¼ä¹‹å¤æ‚ï¼Œä»¥è‡³äºä¸åŒç¼–è¯‘å™¨å¯¹å…¶æ±‚å€¼é¡ºåºæ— æ³•è¾¾æˆä¸€è‡´ã€‚</p>
<p>ä¸€äº›ç¼–è¯‘å™¨é€‰æ‹©å…ˆæ‰§è¡Œ ++iï¼ˆä½¿ i å˜ä¸º 5ï¼Œå¹¶å°†è¯¥å€¼ä½œä¸ºåŠ æ³•çš„å·¦æ“ä½œæ•°ï¼‰ï¼Œç„¶åæ‰§è¡Œ i++ï¼ˆæ­¤æ—¶ä½¿ç”¨çš„æ˜¯å·²é€’å¢åçš„ i å€¼ 5ï¼Œå†å°†å…¶é€’å¢åˆ° 6ï¼›ä½†ç”±äºåç¼€é€’å¢çš„è¯­ä¹‰ï¼ŒåŠ æ³•çš„å³æ“ä½œæ•°ä»ä¸º 5ï¼‰ã€‚æœ€ç»ˆç»“æœæ˜¯ 5 + 5 = 10ã€‚</p>
<p>è€Œå¦ä¸€äº›ç¼–è¯‘å™¨åˆ™å†³å®šå…ˆæ‰§è¡Œ i++ï¼Œäºæ˜¯åŠ æ³•çš„å³æ“ä½œæ•°ä¸º 4ï¼ŒåŒæ—¶å°† i é€’å¢åˆ° 5ã€‚æ¥ç€æ‰§è¡Œ ++iï¼Œæ­¤æ—¶çœ‹åˆ° i çš„å€¼ä¸º 5ï¼Œå°†å…¶é€’å¢åˆ° 6ï¼Œå¹¶å°† 6 ä½œä¸ºåŠ æ³•çš„å·¦æ“ä½œæ•°ã€‚å› æ­¤å¾—åˆ° 6 + 4 = 10ã€‚</p>
<p>ä»è¿™äº›å·®å¼‚å¯ä»¥çœ‹å‡ºï¼Œä¸æŒ‡å®šæ±‚å€¼é¡ºåºçš„è®¾è®¡è™½ç„¶åœ¨è¡¨é¢ä¸Šå¢åŠ äº†ä¸ç¡®å®šæ€§ï¼Œä½†ä¿ƒä½¿ç†Ÿæ‚‰è¿™ä¸€ç‰¹æ€§çš„å¼€å‘è€…ç¼–å†™å‡ºä¸ä¾èµ–ç‰¹å®šæ±‚å€¼é¡ºåºçš„ä»£ç ã€‚å¼€å‘è€…å¿…é¡»é¿å…å¯¹æ±‚å€¼é¡ºåºäº§ç”Ÿéšå«ä¾èµ–ï¼Œè¿™æœ‰åŠ©äºæå‡ä»£ç çš„å¥å£®æ€§å’Œå¯ç§»æ¤æ€§ã€‚</p>
<p>é’ˆå¯¹ä¸Šè¿°æƒ…å†µï¼Œæ­£ç¡®çš„åšæ³•åº”æ˜¯æ˜¾å¼åœ°å°†å‰¯ä½œç”¨åˆ†ç¦»ï¼Œä¾‹å¦‚æ”¹å†™ä¸ºå¦‚ä¸‹å½¢å¼ï¼š</p>
<p><pre><code class="language-cpp">#include &lt;iostream&gt;

int main() {
  int i = 4;
  int preIncrement = ++i; // i is now 5
  int postIncrement = i++; //postIncrement is 5, i is now 6
  i = preIncrement + postIncrement;
  std::cout &lt;&lt; i &lt;&lt; std::endl; // Output will be 10
  return 0;
}</code></pre></p>
<p>è™½ç„¶è¿™ç§æƒ…å†µå¯èƒ½æ¯”è¾ƒç½•è§(ä¸Šè¿°ä»£ç æœ‰ç‚¹äººä¸ºè®¾è®¡çš„ç—•è¿¹)ï¼Œä½†å®ƒç¡®å®æ˜¯ä¸ªé—®é¢˜ â€”â€” ç‰¹åˆ«æ˜¯é‡åˆ°ç±»ä¼¼ä»¥ä¸‹åœºæ™¯æ—¶ï¼š</p>
<p><pre><code class="language-cpp">int f() { std::cout &lt;&lt; &quot;f&quot;; return 1; }
int g() { std::cout &lt;&lt; &quot;g&quot;; return 2; }
int result = f() + g();</code></pre></p>
<p>æ— è®ºç¼–è¯‘å™¨å¦‚ä½•å†³å®šä¸¤ä¸ªå‡½æ•°çš„è°ƒç”¨é¡ºåºï¼Œresult çš„å€¼æœ€ç»ˆéƒ½ä¼šæ˜¯ 3ï¼Œä½†ç¨‹åºçš„è¾“å‡ºå¯èƒ½æ˜¯ â€œfgâ€ æˆ– â€œgfâ€ã€‚</p>
<p>åœ¨è€ƒè™‘äº†æ‰€æœ‰è¿™äº›å› ç´ ä¹‹åï¼Œæˆ‘ä»¬æˆ–è®¸ä¼šè§‰å¾—è‡ªå·±å·²ç»å®Œå…¨æŒæ¡äº† C++ ä¸­çš„æ±‚å€¼é¡ºåºè§„åˆ™ã€‚å°½ç®¡æœ¬ç« åŠªåŠ›æ¶µç›–äº†æ‰€æœ‰å¯èƒ½å¼•å‘é—®é¢˜çš„éšå«æƒ…å†µï¼Œä½†æˆ‘ä»¬æ— æ³•ä¿è¯å®è·µä¸­ä¸ä¼šé‡åˆ°â€œä¸æŒ‰å¸¸ç†å‡ºç‰Œâ€çš„æƒ…å½¢ã€‚C++ ä½œä¸ºä¸€é—¨æ¶µç›–èŒƒå›´æå¹¿ã€è¯­æ³•é«˜åº¦çµæ´»çš„è¯­è¨€ï¼Œå¦‚æœæœ‰äººæœ‰æ„æŒ‘æˆ˜è¾¹ç•Œï¼Œå¯èƒ½å°±ä¼šè§¦ç¢°åˆ°æŸäº›ç¼–è¯‘å™¨çš„â€œç—›ç‚¹â€æˆ–å‡ºç°å®ç°å·®å¼‚ã€‚</p>
  <div class="back-to-toc" style="text-align:left"><a href="index.html">è¿”å›ç›®å½•</a></div>
<div class="navigation">
  <a href="5.4..html" class="prev-link">Â« ä¸Šä¸€ç« ï¼š5.4. é»‘æš—æ³•åˆ™</a>
  <a href="5.6..html" class="next-link">ä¸‹ä¸€ç« ï¼š5.6. æ€»ç»“ Â»</a>
</div>

</div>

  </div>
  <!-- å…ˆåŠ è½½æ ¸å¿ƒåº“ -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  
  <!-- åŠ è½½MathJax -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" id="MathJax-script" async></script>
  
  <!-- ä¸»é¢˜åˆ‡æ¢è„šæœ¬ -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // åˆ›å»ºä¸»é¢˜åˆ‡æ¢æŒ‰é’®
    const themeToggle = document.createElement('button');
    themeToggle.className = 'theme-toggle';
    themeToggle.setAttribute('aria-label', 'åˆ‡æ¢ä¸»é¢˜');
    themeToggle.innerHTML = 'ğŸŒ“';
    document.body.appendChild(themeToggle);
    
    // æ·»åŠ æ·±è‰²å’Œæµ…è‰²ä¸»é¢˜çš„æ ·å¼
    const darkThemeStyle = document.createElement('style');
    const lightThemeStyle = document.createElement('style');
    
    darkThemeStyle.textContent = `
      body.dark-theme {
        --background-color: #1a1a1a;
        --text-color: #e6e6e6;
        --code-bg-color: #2d2d2d;
        --link-color: #58a6ff;
        --highlight-color: #58a6ff;
        --border-color: #333;
        --table-border-color: #444;
        --table-header-bg: #2d2d2d;
        --blockquote-color: #aaa;
        --blockquote-border: #444;
        --part-header-bg: #222;
        --footer-text-color: #aaa;
        --filename-bg: #2d2d2d;
        --nav-bg: #2d2d2d;
        --nav-hover-bg: #444;
        --toc-bg: #222;
        --highlight-section-bg: #2d2d2d;
        --highlight-section-border: #58a6ff;
      }
    `;
    
    lightThemeStyle.textContent = `
      body.light-theme {
        --background-color: #ffffff;
        --text-color: #333333;
        --code-bg-color: #f5f5f5;
        --link-color: #0366d6;
        --highlight-color: #0366d6;
        --border-color: #eee;
        --table-border-color: #ddd;
        --table-header-bg: #f2f2f2;
        --blockquote-color: #666;
        --blockquote-border: #ddd;
        --part-header-bg: #f8f8f8;
        --footer-text-color: #666;
        --filename-bg: #f5f5f5;
        --nav-bg: #f5f5f5;
        --nav-hover-bg: #e6e6e6;
        --toc-bg: #f8f8f8;
        --highlight-section-bg: #f8f8f8;
        --highlight-section-border: #0366d6;
      }
    `;
    
    document.head.appendChild(darkThemeStyle);
    document.head.appendChild(lightThemeStyle);
    
    // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„è®¾ç½®
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    const currentTheme = localStorage.getItem('theme');
    
    if (currentTheme === 'dark') {
      document.body.classList.add('dark-theme');
    } else if (currentTheme === 'light') {
      document.body.classList.add('light-theme');
    } else {
      // å¦‚æœæ²¡æœ‰ä¿å­˜çš„åå¥½ï¼Œè·Ÿéšç³»ç»Ÿ
      if (prefersDarkScheme.matches) {
        document.body.classList.add('dark-theme');
      } else {
        document.body.classList.add('light-theme');
      }
    }
    
    // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
    themeToggle.addEventListener('click', function() {
      console.log('Theme toggle clicked');
      if (document.body.classList.contains('dark-theme')) {
        document.body.classList.remove('dark-theme');
        document.body.classList.add('light-theme');
        localStorage.setItem('theme', 'light');
      } else {
        document.body.classList.remove('light-theme');
        document.body.classList.add('dark-theme');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // ç¡®ä¿ä»£ç å—æœ‰æ­£ç¡®çš„ç±»å
    document.querySelectorAll('pre code').forEach(function(block) {
      if (!block.className && block.parentNode.innerHTML.includes('cpp')) {
        block.className = 'language-cpp';
      } else if (!block.className && block.parentNode.innerHTML.includes('rust')) {
        block.className = 'language-rust';
      } else if (!block.className) {
        block.className = 'language-plaintext';
      }
    });
    
    // å»¶è¿ŸåŠ è½½Prismé«˜äº®
    setTimeout(function() {
      if (window.Prism) {
        window.Prism.highlightAll();
      }
    }, 500);
  });
  </script>
</body>
</html>