
  <!DOCTYPE html>
  <html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4.1. main()å‡½æ•° - èµ°å‡ºC++è°œäº‘</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">
    <script>
      window.MathJax = {"tex":{"inlineMath":[["$","$"],["\\(","\\)"]],"displayMath":[["$$","$$"],["\\[","\\]"]],"processEscapes":true,"tags":"ams"},"svg":{"fontCache":"global"}};
    </script>
    
  </head>
  <body>
    <div class="container">
      
        <div class="chapter-container">
          
  <div class="navigation">
    <a href="4-chapter4-0.html" class="prev-link">Â« ä¸Šä¸€ç« ï¼šç¬¬4ç«  ç¨‹åºå…¥å£ï¼šè¡¨è±¡ä¹‹ä¸‹çš„å¤æ‚æ€§</a>
    <a href="42-linux-chapter4-2.html" class="next-link">ä¸‹ä¸€ç« ï¼š4.2. ä¼é¹…(Linux)å†œåœº Â»</a>
  </div>
  <div class="back-to-toc"><a href="index.html">è¿”å›ç›®å½•</a></div>
  
          <section id="41-main-chapter4-1" class="section">
            <h2 class="section-title">4.1. main()å‡½æ•°</h2>
            <p>å½“æˆ‘ä»¬æœ€åˆåœ¨å­¦æ ¡æˆ–å¤§å­¦å­¦ä¹  C++ æ—¶ï¼Œåœ¨ç¬¬ä¸€å ‚è¯¾ä¸Šï¼Œè€å¸ˆé€šå¸¸ä¼šå‘Šè¯‰æˆ‘ä»¬ï¼šâ€œåŒå­¦ä»¬ï¼Œè¯·çœ‹è¿™ä¸ªä¸»å‡½æ•°ï¼švoid main(void)ã€‚ä½ çš„ç¨‹åºå°±æ˜¯ä»è¿™é‡Œå¼€å§‹è¿è¡Œçš„ã€‚â€ å°±æ˜¯è¿™æ ·ç®€å•ç›´æ¥ã€‚</p>

<p>æˆ‘ä¹‹æ‰€ä»¥å†™ä¸‹ void main(void)ï¼Œåªæ˜¯ä¸ºäº†å¼•èµ·ä½ çš„å¥½å¥‡å¿ƒï¼Œè®©ä½ ä¿æŒè­¦è§‰ã€‚äº‹å®ä¸Šï¼Œå¯¹äºæœ‰ä¸€å®šç»éªŒçš„ C++ å¼€å‘è€…æ¥è¯´ï¼Œvoid main(void) è·ç¦»æ ‡å‡† C++ çš„è§„èŒƒï¼Œå°±åƒâ€œå°¼è«ç‚¹â€ï¼ˆåœ°çƒä¸Šè·ç¦»é™†åœ°æœ€è¿œçš„æµ·æ´‹åœ°ç‚¹ï¼‰è·ç¦»æœ€è¿‘çš„å¤§é™†ä¸€æ ·é¥è¿œã€‚</p>

<p>å“¦ï¼Œä½ è¿˜åœ¨è¿™é‡Œï¼è¿™æ„å‘³ç€ä½ ç¡®å®è¯»äº†è¿™äº›ã€‚å¤ªå¥½äº† â€”â€” ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬å°±åº”è¯¥å…³æ³¨æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œæ¯”å¦‚åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•è¢«æ“ä½œç³»ç»ŸåŠ è½½ï¼Œå¹¶æ‰§è¡Œåˆ°å†…å­˜ä¸­çš„ã€‚</p>

<p>æˆ‘ä»¬ç”Ÿæ´»åœ¨ä¸€ä¸ªè‡ªç”±çš„ä¸–ç•Œä¸­ï¼Œå› æ­¤å¯ä»¥æ ¹æ®è‡ªå·±çš„æ„æ„¿é€‰æ‹©å¤šç§æ“ä½œç³»ç»Ÿã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†ä»‹ç»åº”ç”¨ç¨‹åºåœ¨ Linux å’Œ Windows ä¸‹å¦‚ä½•åŠ è½½å’Œæ‰§è¡Œã€‚</p>

<p>è¿™ä¸¤ä¸ªæ“ä½œç³»ç»Ÿåœ¨åŠ è½½å’Œæ‰§è¡Œç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ–¹é¢å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚å…¶ä¸­ä¸€ç§ç³»ç»Ÿï¼ˆä¸éš¾çŒœå‡ºæ˜¯å“ªä¸ªï¼‰å…è®¸è¿½è¸ªè¿™ä¸€è¿‡ç¨‹çš„æ‰€æœ‰ä»£ç è·¯å¾„ï¼Œç›´è‡³æ·±å…¥å†…æ ¸çš„æ ¸å¿ƒï¼›è€Œå¯¹å¦ä¸€ç§ç³»ç»Ÿï¼Œå¿…é¡»ä¾èµ–ç°æœ‰çš„æ–‡æ¡£ã€ä¹¦ç±ä»¥åŠå„ç§æŠ€æœ¯èµ„æ–™ï¼Œè¿™äº›ä¿¡æ¯éœ€è¦çƒ­è¡·äºåº•å±‚ç ”ç©¶çš„æŠ€æœ¯äººå‘˜è‡ªè¡Œæ”¶é›†ä¸æ•´ç†ã€‚</p>

<p>ç”±äº Linux å¤„ç†è¿™ä¸€æœºåˆ¶çš„æ–¹å¼ä¸ BSD å®¶æ—ï¼ˆå¦‚ FreeBSDã€NetBSD ç­‰ï¼‰éå¸¸ç›¸ä¼¼ï¼Œåœ¨åç»­è®¨è®ºä¸­å°†ä¸å†é¢‘ç¹æåŠè¿™äº›ç³»ç»Ÿã€‚ä¸ºäº†è®©ä½ åœ¨è¿½æ±‚çŸ¥è¯†çš„è¿‡ç¨‹ä¸­ä¹Ÿèƒ½æ„Ÿå—åˆ°ä¹è¶£ï¼Œæˆ‘ä»¬å¸Œæœ›æä¾›æœ€æ–°ä¸”ç›¸å…³çš„ä¿¡æ¯ï¼Œæ‰€ä»¥ä¸ä¸ºé‚£äº›æ—©å·²ä¸å†æ´»è·ƒçš„æ“ä½œç³»ç»Ÿï¼ˆä¾‹å¦‚ MS-DOSï¼‰æä¾›ç›¸å…³å†…å®¹ï¼Œé™¤éä½ æ°å¥½åœ¨ Deutsche Bahn å·¥ä½œ<span class="footnote"><a href="https://www.theregister.com/2024/01/30/windows_311_trundles_on/" target="_blank" rel="noopener noreferrer">https://www.theregister.com/2024/01/30/windows_311_trundles_on/</a></span>ã€‚</p>

<p>ä½†åœ¨æ·±å…¥æ¢è®¨ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå±•ç¤ºä¸€ä¸ªç”¨äºæ¼”ç¤ºä¸Šè¿°åŠŸèƒ½çš„æµ‹è¯•ç¨‹åºï¼š</p>

<pre><code class="language-cpp">#include &lt;cstring&gt;
#include &lt;cstdio&gt;
struct A {
  A(const char* p_a):m_a(new char[32]) { strcpy(m_a, p_a);
    printf(&quot;A::A :
  }
  ~A() {
  printf(&quot;A::~A :
    delete[] m_a;
  }
  volatile const char* get() const {return m_a;}
private:
  char* m_a;
};
const char* my_string= &quot;Hello string&quot;;
A my_a(my_string);
const char* my_other_string = &quot;Go away string&quot;;
A my_other_a(my_other_string);
int main() {
  printf(&quot;Hello, World,
}</code></pre>

<p>åœ¨ç¬¦åˆæ ‡å‡†çš„ç³»ç»Ÿä¸Šç¼–è¯‘å¹¶è¿è¡Œè¯¥ç¨‹åºæ—¶ï¼Œå®ƒå°†è¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼Œæ­£å¦‚æ ‡å‡†æ‰€é¢„æœŸçš„é‚£æ ·ï¼š</p>

<pre><code class="language-shell">A::A : Hello string
A::A : Go away string
Hello, World, Hello string, Go away string
A::~A : Go away string
A::~A : Hello string</code></pre>

<p>æˆ‘ä»¬æœ‰æ„é¿å…ä½¿ç”¨ cout å’Œå…¶ä»–æµæ“ä½œï¼Œä»¥ä¿æŒç¨‹åºçš„ç®€æ´æ€§ã€‚</p>

<p>æˆ‘ä»¬ä¸æƒ³è®©ç”Ÿæˆçš„ä»£ç å—åˆ°å¹²æ‰°ï¼Œå› ä¸ºæ¥ä¸‹æ¥æˆ‘ä»¬å°†æ·±å…¥åˆ†æç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>

<p>è¿™æ®µä»£ç æ˜¯ä¸ºäº†æœ¬ç« ç‰¹åˆ«ç¼–å†™çš„ç¤ºä¾‹ä»£ç ï¼Œå±äºåˆæˆåœºæ™¯ã€‚ä½œè€…å®Œå…¨æ¸…æ¥šä½¿ç”¨ strcpy å¯èƒ½å¸¦æ¥çš„ç¼“å†²åŒºæº¢å‡ºé£é™©ï¼Œå› æ­¤å»ºè®®è¯»è€…â€œå¬å…¶è¨€ï¼Œè€Œéæ•ˆå…¶è¡Œâ€ â€”â€” è¯·ä¸è¦åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ strcpyã€‚</p>

<p>å›åˆ°æˆ‘ä»¬çš„ä¸»é¢˜ï¼šæ¥çœ‹çœ‹æ“ä½œç³»ç»Ÿå¦‚ä½•åŠ è½½å¹¶æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚</p>

<p>å¦‚æœä½ è§‰å¾—ä¸‹é¢çš„å†…å®¹è¿‡äºåº•å±‚ã€ä¸å¤Ÿå¸å¼•äººï¼Œè¯·è®°ä½ï¼šC++ ç¨‹åºä¼šç¼–è¯‘ä¸ºåŸç”Ÿä»£ç ï¼Œèƒ½å¤Ÿä»¥åº•å±‚æ“ä½œç³»ç»Ÿæ‰€èƒ½æä¾›çš„æœ€é«˜æ€§èƒ½è¿è¡Œã€‚</p>

<p>æ­£å› å¦‚æ­¤ï¼Œæˆ‘ä»¬è®¤ä¸ºæ¯ä¸€ä½ C++ å¼€å‘è€…éƒ½æœ‰å¿…è¦äº†è§£æ“ä½œç³»ç»Ÿå¦‚ä½•å¤„ç†ä»–ä»¬çš„ç¨‹åºï¼Œä»¥åŠç¼–è¯‘å™¨åœ¨å®Œæˆæºç ç¿»è¯‘ã€ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¹‹åï¼Œç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>

<p>æˆ‘ä»¬ä¼šå°½é‡é¿å…é™·å…¥è¿‡äºåº•å±‚çš„ç»†èŠ‚ï¼Œåªå±•ç¤ºçœŸæ­£å¿…è¦çš„å†…å®¹ï¼Œä»¥ä¾¿å„ä½èƒ½å……åˆ†ç†è§£è¿™ä¸€è¿‡ç¨‹çš„é‡è¦æ€§ã€‚</p>
          </section>
          
  <div class="navigation">
    <a href="4-chapter4-0.html" class="prev-link">Â« ä¸Šä¸€ç« ï¼šç¬¬4ç«  ç¨‹åºå…¥å£ï¼šè¡¨è±¡ä¹‹ä¸‹çš„å¤æ‚æ€§</a>
    <a href="42-linux-chapter4-2.html" class="next-link">ä¸‹ä¸€ç« ï¼š4.2. ä¼é¹…(Linux)å†œåœº Â»</a>
  </div>
  <div class="back-to-toc"><a href="index.html">è¿”å›ç›®å½•</a></div>
  
        </div>
        
    </div>
    
    <!-- å…ˆåŠ è½½æ ¸å¿ƒåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- åŠ è½½MathJax -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" id="MathJax-script" async></script>
    
    <!-- ä¸»é¢˜åˆ‡æ¢è„šæœ¬ -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      // åˆ›å»ºä¸»é¢˜åˆ‡æ¢æŒ‰é’®
      const themeToggle = document.createElement('button');
      themeToggle.className = 'theme-toggle';
      themeToggle.setAttribute('aria-label', 'åˆ‡æ¢ä¸»é¢˜');
      themeToggle.innerHTML = 'ğŸŒ“';
      document.body.appendChild(themeToggle);
      
      // æ·»åŠ æ·±è‰²å’Œæµ…è‰²ä¸»é¢˜çš„æ ·å¼
      const darkThemeStyle = document.createElement('style');
      const lightThemeStyle = document.createElement('style');
      
      darkThemeStyle.textContent = `
        body.dark-theme {
          --background-color: #1a1a1a;
          --text-color: #e6e6e6;
          --code-bg-color: #2d2d2d;
          --link-color: #58a6ff;
          --highlight-color: #58a6ff;
          --border-color: #333;
          --table-border-color: #444;
          --table-header-bg: #2d2d2d;
          --blockquote-color: #aaa;
          --blockquote-border: #444;
          --part-header-bg: #222;
          --footer-text-color: #aaa;
          --filename-bg: #2d2d2d;
          --nav-bg: #2d2d2d;
          --nav-hover-bg: #444;
          --toc-bg: #222;
          --highlight-section-bg: #2d2d2d;
          --highlight-section-border: #58a6ff;
        }
      `;
      
      lightThemeStyle.textContent = `
        body.light-theme {
          --background-color: #ffffff;
          --text-color: #333333;
          --code-bg-color: #f5f5f5;
          --link-color: #0366d6;
          --highlight-color: #0366d6;
          --border-color: #eee;
          --table-border-color: #ddd;
          --table-header-bg: #f2f2f2;
          --blockquote-color: #666;
          --blockquote-border: #ddd;
          --part-header-bg: #f8f8f8;
          --footer-text-color: #666;
          --filename-bg: #f5f5f5;
          --nav-bg: #f5f5f5;
          --nav-hover-bg: #e6e6e6;
          --toc-bg: #f8f8f8;
          --highlight-section-bg: #f8f8f8;
          --highlight-section-border: #0366d6;
        }
      `;
      
      document.head.appendChild(darkThemeStyle);
      document.head.appendChild(lightThemeStyle);
      
      // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„è®¾ç½®
      const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
      const currentTheme = localStorage.getItem('theme');
      
      if (currentTheme === 'dark') {
        document.body.classList.add('dark-theme');
      } else if (currentTheme === 'light') {
        document.body.classList.add('light-theme');
      } else {
        // å¦‚æœæ²¡æœ‰ä¿å­˜çš„åå¥½ï¼Œè·Ÿéšç³»ç»Ÿ
        if (prefersDarkScheme.matches) {
          document.body.classList.add('dark-theme');
        } else {
          document.body.classList.add('light-theme');
        }
      }
      
      // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
      themeToggle.addEventListener('click', function() {
        console.log('Theme toggle clicked');
        if (document.body.classList.contains('dark-theme')) {
          document.body.classList.remove('dark-theme');
          document.body.classList.add('light-theme');
          localStorage.setItem('theme', 'light');
        } else {
          document.body.classList.remove('light-theme');
          document.body.classList.add('dark-theme');
          localStorage.setItem('theme', 'dark');
        }
      });
      
      // ç¡®ä¿ä»£ç å—æœ‰æ­£ç¡®çš„ç±»å
      document.querySelectorAll('pre code').forEach(function(block) {
        if (!block.className && block.parentNode.innerHTML.includes('cpp')) {
          block.className = 'language-cpp';
        } else if (!block.className && block.parentNode.innerHTML.includes('rust')) {
          block.className = 'language-rust';
        } else if (!block.className) {
          block.className = 'language-plaintext';
        }
      });
      
      // å»¶è¿ŸåŠ è½½Prismé«˜äº®
      setTimeout(function() {
        if (window.Prism) {
          window.Prism.highlightAll();
        }
      }, 500);
    });
    </script>
  </body>
  </html>
  