
  <!DOCTYPE html>
  <html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7.4. å‡½æ•°å¼ç¼–ç¨‹çš„æ•‘æ´ - èµ°å‡ºC++è°œäº‘</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">
    <script>
      window.MathJax = {"tex":{"inlineMath":[["$","$"],["\\(","\\)"]],"displayMath":[["$$","$$"],["\\[","\\]"]],"processEscapes":true,"tags":"ams"},"svg":{"fontCache":"global"}};
    </script>
    
  </head>
  <body>
    <div class="container">
      
        <div class="chapter-container">
          
  <div class="navigation">
    <a href="73--chapter7-3.html" class="prev-link">Â« ä¸Šä¸€ç« ï¼š7.3. å¹¶è¡Œå’Œå¹¶å‘çš„å¸¸è§é—®é¢˜</a>
    <a href="75-actor-chapter7-5.html" class="next-link">ä¸‹ä¸€ç« ï¼š7.5. Actoræ¨¡å‹ Â»</a>
  </div>
  <div class="back-to-toc"><a href="index.html">è¿”å›ç›®å½•</a></div>
  
          <section id="74--chapter7-4" class="section">
            <h2 class="section-title">7.4. å‡½æ•°å¼ç¼–ç¨‹çš„æ•‘æ´</h2>
            <p>å¦‚æˆ‘ä»¬æ‰€è§ï¼Œå¹¶è¡Œä¸å¹¶å‘ä»»åŠ¡çš„æ ¸å¿ƒæŒ‘æˆ˜ä¹‹ä¸€ï¼Œå°±åœ¨äºå¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®ä¸ä¿®æ”¹æ‰€å¸¦æ¥çš„å¤æ‚æ€§ã€‚</p>

<p>çº¯å‡½æ•°å¼ç¼–ç¨‹é€šè¿‡ä¸å¯å˜æ€§ï¼ˆimmutabilityï¼‰å¤©ç„¶åœ°è§£å†³äº†è¿™ä¸€é—®é¢˜ â€”â€” åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¸å¯å˜ï¼Œä»»ä½•å€¼çš„æ”¹å˜éƒ½æ˜¯é€šè¿‡å¯¹åŸå€¼çš„è½¬æ¢å¹¶è¿”å›æ–°å€¼æ¥å®ç°çš„ï¼Œè€Œéå°±åœ°ä¿®æ”¹ã€‚å› æ­¤ï¼Œçº¿ç¨‹æ°¸è¿œæ— éœ€æ‹…å¿ƒå…¶ä»–çº¿ç¨‹æ­£åœ¨ä½¿ç”¨çš„æ•°æ®è¢«æ„å¤–ä¿®æ”¹ã€‚æˆ‘ä»¬åœ¨è®¨è®º C++ å¤šèŒƒå¼ç¼–ç¨‹æ—¶å·²ç»é˜é‡Šè¿‡è¿™ä¸€æœºåˆ¶çš„ä¼˜åŠ¿ã€‚</p>

<p>ä½†å‡½æ•°å¼ç¼–ç¨‹çš„ä»·å€¼ä¸ä»…é™äºæ­¤ï¼šå®ƒè¿˜å¤©ç„¶æ”¯æŒå¯å¹¶è¡ŒåŒ–çš„ç®—æ³•ç»“æ„ã€‚C++ æ ‡å‡†å§”å‘˜ä¼šåœ¨å¼•å…¥å‡½æ•°å¼é£æ ¼ç®—æ³•çš„åŒæ—¶ï¼Œä¹ŸåŠ å…¥äº†æ‰§è¡Œç­–ç•¥ï¼ˆexecution policyï¼‰æœºåˆ¶ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥è½»æ¾åœ°å°†é›†åˆæ“ä½œå¹¶è¡ŒåŒ–ã€‚</p>

<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼šè®¡ç®—ä¸€ä¸ªé›†åˆä¸­æ‰€æœ‰æ•°å€¼çš„å¹³æ–¹å’Œã€‚</p>

<p>è¿™ç±»é—®é¢˜éå¸¸é€‚åˆç”¨å‡½æ•°å¼çš„æ–¹å¼å»ºæ¨¡ï¼šå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…¸å‹çš„ map-reduce è¿‡ç¨‹ï¼šé¦–å…ˆï¼Œä½¿ç”¨ map æ“ä½œå°†åŸå§‹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ æ˜ å°„ä¸ºå…¶å¹³æ–¹ï¼›ç„¶åï¼Œé€šè¿‡ reduce æ“ä½œå°†æ‰€æœ‰å¹³æ–¹å€¼ç´¯åŠ ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœã€‚åœ¨ C++ çš„ STL ä¸­ï¼Œè¿™äº›æ“ä½œåˆ†åˆ«ç”± std::transform å’Œ std::reduce å®ç°ã€‚è™½ç„¶ std::transform&#95;reduce æä¾›äº†ä¸€ä¸ªæ›´é«˜æ•ˆçš„ç»„åˆç‰ˆæœ¬ï¼Œä½†ä¸ºäº†ä½¿ç¤ºä¾‹æ›´å…·æ•™å­¦æ„ä¹‰ï¼Œå°†ä½¿ç”¨åŸºæœ¬å½¢å¼è¿›è¡Œæ¼”ç¤ºã€‚</p>

<p>å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<pre><code class="language-cpp">long long sumOfSquares(const vector&lt;int&gt; numbers){
  vector&lt;long long&gt; squaredNumbers(numbers.size());
  auto squareNumber = [](const long it ){ return it * it; };
  transform(numbers.begin(), numbers.end(), squaredNumbers.begin(), squareNumber);
  return reduce(squaredNumbers.begin(), squaredNumbers.end(), 0);
}
TEST_CASE(&quot;sum of squares in parallel&quot;) {
  vector&lt;int&gt; numbers{234, 423, 345, 212, 112, 2412};
  CHECK_EQ(6227942, sumOfSquares(numbers));
}</code></pre>

<p>è¦è®©è¿™äº›æ“ä½œå¹¶è¡Œè¿è¡Œï¼Œå”¯ä¸€éœ€è¦åšçš„å°±æ˜¯å‘ä¸¤ä¸ªå‡½æ•°å¼ç®—æ³•æ·»åŠ ä¸€ä¸ªæŒ‡å®šæ‰§è¡Œç­–ç•¥çš„å‚æ•°ã€‚è¿™é‡Œä½¿ç”¨çš„æ‰§è¡Œç­–ç•¥æ˜¯ std::execution::parï¼Œè¿™æ˜¯æ ‡å‡†åº“æä¾›çš„ std::execution::parallel&#95;policy å®ä¾‹ï¼Œç”¨äºæŒ‡å®šç®—æ³•éœ€è¦å¹¶è¡Œè¿è¡Œï¼š</p>

<pre><code class="language-cpp">long long sumOfSquares(const vector&lt;int&gt; numbers){
  vector&lt;long long&gt; squaredNumbers(numbers.size());
  auto squareNumber = [](const long it ){ return it * it; };
  transform(std::execution::par, numbers.begin(), numbers.end(), squaredNumbers.begin(), squareNumber);
  return reduce(std::execution::par, squaredNumbers.begin(), squaredNumbers.end(), 0);
}</code></pre>

<p>ä»è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°å‡ ç‚¹å…³é”®ä¹‹å¤„ã€‚</p>

<p>é¦–å…ˆï¼Œåœ¨ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼æ—¶ï¼Œåˆ‡æ¢ä¸åŒçš„æ‰§è¡Œç­–ç•¥éå¸¸å®¹æ˜“ã€‚ è¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæ›´çµæ´»åœ°åº”å¯¹å¹¶è¡ŒåŒ–ç›¸å…³çš„é—®é¢˜ï¼Œå¹¶æ ¹æ®å®é™…éœ€æ±‚ä¼˜åŒ–æ€§èƒ½ã€‚åªéœ€æ›´æ”¹ä¸€è¡Œä»£ç ï¼Œå°±å¯ä»¥åœ¨é¡ºåºæ‰§è¡Œå’Œå¹¶è¡Œæ‰§è¡Œä¹‹é—´åˆ‡æ¢ï¼Œè€Œæ— éœ€é‡æ„æ•´ä¸ªç®—æ³•é€»è¾‘ã€‚</p>

<p>ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰æƒ…å†µä¸‹å¹¶è¡Œæ‰§è¡Œéƒ½ä¼˜äºé¡ºåºæ‰§è¡Œã€‚å¯¹äºå°è§„æ¨¡æ•°æ®é›†æˆ–çŸ­é›†åˆæ¥è¯´ï¼Œåˆ›å»ºå’Œç®¡ç†çº¿ç¨‹æ‰€å¸¦æ¥çš„å¼€é”€å¯èƒ½ä¼šè¶…è¿‡å¹¶è¡ŒåŒ–å¸¦æ¥çš„æ€§èƒ½æ”¶ç›Šã€‚å› æ­¤ï¼Œé€‰æ‹©æ˜¯å¦å¯ç”¨å¹¶è¡Œç­–ç•¥åº”åŸºäºå¯¹è¾“å…¥æ•°æ®é‡ã€è®¡ç®—å¤æ‚åº¦ä»¥åŠç¡¬ä»¶èµ„æºçš„ç»¼åˆè¯„ä¼°ã€‚</p>

<p>å…¶æ¬¡ï¼Œæ‰§è¡Œç­–ç•¥å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®è¿›è¡Œæ§åˆ¶ã€‚ å¯ä»¥åœ¨å¼€å‘å’Œæµ‹è¯•é˜¶æ®µä½¿ç”¨é¡ºåºæ‰§è¡Œæ¥éªŒè¯é€»è¾‘æ­£ç¡®æ€§ï¼ˆæ— éœ€è€ƒè™‘çº¿ç¨‹åŒæ­¥é—®é¢˜ï¼‰ï¼Œç„¶ååœ¨éƒ¨ç½²ç¯å¢ƒä¸­æ ¹æ®å®é™…æ•°æ®ç‰¹æ€§åŠ¨æ€é€‰æ‹©æœ€åˆé€‚çš„æ‰§è¡Œç­–ç•¥ã€‚è¿™ç§çµæ´»æ€§æå¤§åœ°æå‡äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œé€‚åº”æ€§ã€‚</p>

<p>ç¬¬ä¸‰ï¼Œæ¯ç§æ‰§è¡Œç­–ç•¥éƒ½ä¼šå¯¹ä»£ç æ–½åŠ ç‰¹å®šçš„é™åˆ¶ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨å¹¶è¡Œç­–ç•¥ï¼ˆå¦‚ std::execution::parï¼‰æ—¶ï¼Œè¦æ±‚è¿­ä»£å™¨åœ¨æ•´ä¸ªæ“ä½œè¿‡ç¨‹ä¸­ä¿æŒæœ‰æ•ˆï¼Œå› æ­¤ä¸èƒ½åœ¨å˜æ¢è¿‡ç¨‹ä¸­ä¿®æ”¹å®¹å™¨ç»“æ„ï¼ˆå¦‚æ’å…¥æˆ–åˆ é™¤å…ƒç´ ï¼‰ã€‚æ­¤å¤–ï¼Œåƒ std::back&#95;inserter è¿™æ ·ä¾èµ–åŠ¨æ€æ‰©å±•çš„å†™å…¥æ“ä½œä¹Ÿæ˜¯ä¸å…è®¸çš„ã€‚</p>

<p>é™¤äº† std::execution::parallel&#95;policyï¼ŒSTL è¿˜æä¾›äº†å…¶ä»–ç­–ç•¥ï¼š</p>

<ul>
    <li>std::execution::sequenced&#95;policy
  
  </li>  <li>std::execution::parallel&#95;unsequenced&#95;policy
  
  </li>  <li>std::execution::unsequenced&#95;policy
</ul>

<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ ‡å‡†åŒ–å§”å‘˜ä¼šæœªæ¥å¯èƒ½ä¼šä¸º std::parallel::cuda å’Œ std::parallel::opencl æ·»åŠ å†…ç½®ç­–ç•¥ï¼Œä»¥æ”¯æŒæ›´å¤šæ ·åŒ–çš„å¹¶è¡Œè®¡ç®—ç¯å¢ƒã€‚ç”±äºæ¯ç§æ‰§è¡Œç­–ç•¥éƒ½æœ‰å…¶ç‰¹å®šçš„é™åˆ¶å’Œé€‚ç”¨åœºæ™¯ï¼Œå› æ­¤æœ€å…·å¯ç§»æ¤æ€§å’Œå¥å£®æ€§çš„ä»£ç é€šå¸¸è¿½æ±‚æœ€å¤§ç¨‹åº¦çš„ä¸å¯å˜æ€§å’Œå‡½æ•°å¼ç®—æ³•çš„åº”ç”¨ã€‚</p>

<p>ç¬¬å››ç‚¹ï¼Œè¿™äº›ç®—æ³•è™½ç„¶æŒ‰é¡ºåºè°ƒç”¨ï¼Œä½†å†…éƒ¨å¯ä»¥å¹¶è¡ŒåŒ–ã€‚å¦‚æœéœ€è¦è¿›ä¸€æ­¥æ¦¨å–è®¡ç®—èµ„æºï¼Œå¯ä»¥ä½¿ç”¨ç»„åˆç®—æ³•å¦‚ std::transform&#95;reduce æˆ–è€…è‡ªè¡Œç¼–å†™åˆå¹¶é€»è¾‘æ¥ä¼˜åŒ–æ€§èƒ½ã€‚ç„¶è€Œï¼Œå¹¶è¡ŒåŒ–æ˜¯ä¸€ç§æƒè¡¡ï¼šéƒ¨åˆ†è®¡ç®—èµ„æºä¼šæ¶ˆè€—åœ¨çº¿ç¨‹å¯åŠ¨å’ŒåŒæ­¥ä¸Šï¼ŒæŸäº›æƒ…å†µä¸‹è¿™å¯èƒ½å¯¼è‡´æ•ˆç‡åè€Œä¸‹é™ã€‚</p>

<p>æœ€åç¬¬äº”ç‚¹ï¼ŒMap-Reduce æ¨¡å¼éå¸¸å¼ºå¤§ã€‚ä»»ä½•ä¸€å…ƒå‡½æ•°éƒ½å¯ä»¥ç”¨äº map é˜¶æ®µï¼Œè€Œä»»ä½•äºŒå…ƒå‡½æ•°éƒ½å¯ä»¥ç”¨äº reduce é˜¶æ®µã€‚é€šè¿‡ç»‘å®šå‚æ•°ï¼Œç”šè‡³å¯ä»¥å°†å¤šå…ƒå‡½æ•°è½¬æ¢ä¸ºä¸€å…ƒæˆ–äºŒå…ƒå½¢å¼ï¼Œä»è€Œé€‚åº”ä¸åŒçš„éœ€æ±‚ã€‚map å’Œ reduce å¯ä»¥ä»¥å¤šç§æ–¹å¼é“¾å¼ç»„åˆï¼Œå½¢æˆå¤æ‚çš„å¤„ç†æµç¨‹ã€‚å¦‚æœæŠŠç¨‹åºè§†ä¸ºâ€œæ•°æ®è¾“å…¥ -> å¤„ç† -> è¾“å‡ºâ€çš„è¿‡ç¨‹ï¼Œå°±ä¼šå‘ç°å¤§å¤šæ•°ç¨‹åºå®é™…ä¸Šéƒ½å¯ä»¥è¡¨ç¤ºä¸ºâ€œæ•°æ®è¾“å…¥ -> å‡½æ•°å¼è½¬æ¢ -> æ•°æ®è¾“å‡ºâ€ï¼Œå…¶ä¸­è®¸å¤šè½¬æ¢æ­£æ˜¯åŸºäº map/reduce æ“ä½œã€‚è¿™ç§è®¤çŸ¥å‚¬ç”Ÿäº†å¼ºå¤§çš„ç¼–ç¨‹æ¨¡å‹ â€”â€” å¯ä»¥è‡ªç”±æ§åˆ¶æ•´ä¸ªç®—æ³•æˆ–å…¶éƒ¨åˆ†çš„å¹¶è¡ŒåŒ–å¼€å…³ã€‚è™½ç„¶æœ‰æ—¶éœ€è¦ä¸ºå…³é”®ä»£ç ç¼–å†™å®šåˆ¶åŒ–çš„å¹¶è¡Œç®—æ³•ï¼Œä½†å¤§éƒ¨åˆ†ä¼˜åŒ–å¯ä»¥ç›´æ¥åˆ©ç”¨ç°æœ‰çš„å‡½æ•°å¼å·¥å…·å®ç°ã€‚</p>

<p>å”¯ä¸€çš„å‰ææ˜¯ï¼šå¿…é¡»ä½¿ç”¨ä¸å¯å˜æ•°æ®å’Œå‡½æ•°å¼ç®—æ³•ã€‚</p>

<p>è‡³æ­¤ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„è®¾è®¡é£æ ¼ï¼Œå®ƒèšç„¦äºæ•°æ®ç»“æ„åŠå…¶è½¬æ¢ã€‚ä½†åœ¨è½¯ä»¶æ¶æ„ä¸­ï¼Œè¿˜å­˜åœ¨å¦ä¸€ç§å…³æ³¨è¡Œä¸ºçš„è®¾è®¡èŒƒå¼ã€‚è¿™ç§èŒƒå¼å°†ç¨‹åºåˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„è¡Œä¸ºå•å…ƒï¼Œå¹¶æ”¯æŒå¹¶å‘ä¸å¹¶è¡Œç¼–ç¨‹ã€‚è¿™å°±æ˜¯Actor æ¨¡å‹ï¼Œä¸€ç§æ—¨åœ¨ç®€åŒ–å¹¶å‘ç¼–ç¨‹å¤æ‚åº¦çš„è®¾è®¡é£æ ¼ã€‚</p>

</li>
          </section>
          
  <div class="navigation">
    <a href="73--chapter7-3.html" class="prev-link">Â« ä¸Šä¸€ç« ï¼š7.3. å¹¶è¡Œå’Œå¹¶å‘çš„å¸¸è§é—®é¢˜</a>
    <a href="75-actor-chapter7-5.html" class="next-link">ä¸‹ä¸€ç« ï¼š7.5. Actoræ¨¡å‹ Â»</a>
  </div>
  <div class="back-to-toc"><a href="index.html">è¿”å›ç›®å½•</a></div>
  
        </div>
        
    </div>
    
    <!-- å…ˆåŠ è½½æ ¸å¿ƒåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- åŠ è½½MathJax -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" id="MathJax-script" async></script>
    
    <!-- ä¸»é¢˜åˆ‡æ¢è„šæœ¬ -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      // åˆ›å»ºä¸»é¢˜åˆ‡æ¢æŒ‰é’®
      const themeToggle = document.createElement('button');
      themeToggle.className = 'theme-toggle';
      themeToggle.setAttribute('aria-label', 'åˆ‡æ¢ä¸»é¢˜');
      themeToggle.innerHTML = 'ğŸŒ“';
      document.body.appendChild(themeToggle);
      
      // æ·»åŠ æ·±è‰²å’Œæµ…è‰²ä¸»é¢˜çš„æ ·å¼
      const darkThemeStyle = document.createElement('style');
      const lightThemeStyle = document.createElement('style');
      
      darkThemeStyle.textContent = `
        body.dark-theme {
          --background-color: #1a1a1a;
          --text-color: #e6e6e6;
          --code-bg-color: #2d2d2d;
          --link-color: #58a6ff;
          --highlight-color: #58a6ff;
          --border-color: #333;
          --table-border-color: #444;
          --table-header-bg: #2d2d2d;
          --blockquote-color: #aaa;
          --blockquote-border: #444;
          --part-header-bg: #222;
          --footer-text-color: #aaa;
          --filename-bg: #2d2d2d;
          --nav-bg: #2d2d2d;
          --nav-hover-bg: #444;
          --toc-bg: #222;
          --highlight-section-bg: #2d2d2d;
          --highlight-section-border: #58a6ff;
        }
      `;
      
      lightThemeStyle.textContent = `
        body.light-theme {
          --background-color: #ffffff;
          --text-color: #333333;
          --code-bg-color: #f5f5f5;
          --link-color: #0366d6;
          --highlight-color: #0366d6;
          --border-color: #eee;
          --table-border-color: #ddd;
          --table-header-bg: #f2f2f2;
          --blockquote-color: #666;
          --blockquote-border: #ddd;
          --part-header-bg: #f8f8f8;
          --footer-text-color: #666;
          --filename-bg: #f5f5f5;
          --nav-bg: #f5f5f5;
          --nav-hover-bg: #e6e6e6;
          --toc-bg: #f8f8f8;
          --highlight-section-bg: #f8f8f8;
          --highlight-section-border: #0366d6;
        }
      `;
      
      document.head.appendChild(darkThemeStyle);
      document.head.appendChild(lightThemeStyle);
      
      // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„è®¾ç½®
      const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
      const currentTheme = localStorage.getItem('theme');
      
      if (currentTheme === 'dark') {
        document.body.classList.add('dark-theme');
      } else if (currentTheme === 'light') {
        document.body.classList.add('light-theme');
      } else {
        // å¦‚æœæ²¡æœ‰ä¿å­˜çš„åå¥½ï¼Œè·Ÿéšç³»ç»Ÿ
        if (prefersDarkScheme.matches) {
          document.body.classList.add('dark-theme');
        } else {
          document.body.classList.add('light-theme');
        }
      }
      
      // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
      themeToggle.addEventListener('click', function() {
        console.log('Theme toggle clicked');
        if (document.body.classList.contains('dark-theme')) {
          document.body.classList.remove('dark-theme');
          document.body.classList.add('light-theme');
          localStorage.setItem('theme', 'light');
        } else {
          document.body.classList.remove('light-theme');
          document.body.classList.add('dark-theme');
          localStorage.setItem('theme', 'dark');
        }
      });
      
      // ç¡®ä¿ä»£ç å—æœ‰æ­£ç¡®çš„ç±»å
      document.querySelectorAll('pre code').forEach(function(block) {
        if (!block.className && block.parentNode.innerHTML.includes('cpp')) {
          block.className = 'language-cpp';
        } else if (!block.className && block.parentNode.innerHTML.includes('rust')) {
          block.className = 'language-rust';
        } else if (!block.className) {
          block.className = 'language-plaintext';
        }
      });
      
      // å»¶è¿ŸåŠ è½½Prismé«˜äº®
      setTimeout(function() {
        if (window.Prism) {
          window.Prism.highlightAll();
        }
      }, 500);
    });
    </script>
  </body>
  </html>
  